[global]
api_key = "han1234"
admin_username = "admin"
admin_password = "admin"

[sora]
base_url = "https://sora.api9.de/backend"
timeout = 120
max_retries = 3
poll_interval = 10
max_poll_attempts = 600

[server]
host = "0.0.0.0"
port = 8000

[database]
# 数据库类型: sqlite, mysql
# sqlite: 单机部署，支持100-300并发
# mysql: 分布式部署，支持500-1000+并发
type = "sqlite"

# SQLite 配置 (当 type = "sqlite" 时使用)
sqlite_path = "data/hancat.db"

# MySQL 配置 (当 type = "mysql" 时使用)
# 需要先创建数据库: CREATE DATABASE sora2api CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
mysql_host = "localhost"
mysql_port = 3306
mysql_user = "root"
mysql_password = ""
mysql_database = "sora2api"
mysql_pool_size = 20

[redis]
# Redis 配置 (用于分布式锁和缓存)
# 启用后支持多实例部署和更高并发
enabled = false
host = "localhost"
port = 6379
password = ""
db = 0
# 锁超时时间 (秒)
lock_timeout = 300

[debug]
enabled = false
log_requests = true
log_responses = true
mask_token = true

[cache]
enabled = false
timeout = 600
base_url = "http://127.0.0.1:8000"

[generation]
image_timeout = 300
video_timeout = 1500

[admin]
error_ban_threshold = 3

[proxy]
proxy_enabled = false
proxy_url = ""
proxy_pool_enabled = false

[watermark_free]
watermark_free_enabled = false
parse_method = "third_party"
custom_parse_url = ""
custom_parse_token = ""

[token_refresh]
at_auto_refresh_enabled = false

[cloudflare]
# Cloudflare Solver API 配置
# 当检测到 429 Cloudflare challenge 时，自动请求此 API 获取 cf_clearance
enabled = true
api_url = "http://64.23.171.147:8005"
api_key = ""
# 全局模式：对所有请求使用 CF 凭据
global_enabled = false
# API-only 模式：仅对 API 请求使用 CF 凭据
api_only_enabled = true
